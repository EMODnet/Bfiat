<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Function to obtain (time x trait) data by combining model output (time x taxon) with trait (taxon x trait) data. — Combining Model output and Trait data • Bfiat</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Function to obtain (time x trait) data by combining model output (time x taxon) with trait (taxon x trait) data. — Combining Model output and Trait data"><meta property="og:description" content="get_trait_model combines (1) output of a fisheries model that describes how taxa densities evolve with time, with (2) a trait database for these taxa, to obtain how the traits evolve over time."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Bfiat</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/Bfiat.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/MWTL_EF.html">R-package Bfiat - Modelling trawling effects on ecosystem functioning - MWTL data</a>
    </li>
    <li>
      <a href="../articles/MWTL.html">The Bfiat package: modelling trawling effects in the Dutch part of the Northsea</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Function to obtain (time x trait) data by combining model output (time x taxon) with trait (taxon x trait) data.</h1>

    <div class="hidden name"><code>getTraitModel.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>get_trait_model</code> combines (1) output of a fisheries model that describes how taxa densities evolve with time, with (2) a trait database for these taxa, to obtain how the traits evolve over time.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_trait_model</span><span class="op">(</span><span class="va">model</span>, <span class="va">trait</span>, trait_class <span class="op">=</span> <span class="cn">NULL</span>, trait_score <span class="op">=</span> <span class="cn">NULL</span>, </span>
<span>                taxon_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span>, </span>
<span>                taxonomy <span class="op">=</span> <span class="cn">NULL</span>, taxon_column <span class="op">=</span> <span class="fl">1</span>, </span>
<span>                scalewithvalue <span class="op">=</span> <span class="cn">TRUE</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <p></p>
<dl><dt id="arg-model">model<a class="anchor" aria-label="anchor" href="#arg-model"></a></dt>
<dd><p>dynamic model output that describes how taxa change over time. This is a matrix with (time x taxon) information, such as generated from the function <a href="trawlingfun.html">run_perturb</a>. The first column should contain the time, and the other columns the taxon density over time, with the column names the actual taxon names. (see note for the consequences of this.)</p></dd>

  <dt id="arg-taxon-names">taxon_names<a class="anchor" aria-label="anchor" href="#arg-taxon-names"></a></dt>
<dd><p>names of the taxa, one for each column in <code>model</code>, except the first column. A vector of length = ncol(model) - 1. These names will be matched with the trait database, and optionally with <code>weight</code> if this is a two-columned matrix/data.frame.</p></dd>

  <dt id="arg-trait">trait<a class="anchor" aria-label="anchor" href="#arg-trait"></a></dt>
<dd><p>(taxon x trait) data or (descriptor x trait) data, in *WIDE* format, and containing numerical values only. Traits can be fuzzy coded. The trait matrix should have the name of the taxon in its first column (if <code>taxon_column=1</code>); it is also allowed to have the taxon names as row.names (if <code>taxon_column=0</code>).</p></dd>

  <dt id="arg-trait-class-">trait_class <a class="anchor" aria-label="anchor" href="#arg-trait-class-"></a></dt>
<dd><p>a vector with indices to trait levels for each modality in matrix <code>trait</code>. The length of this vector should equal the number of columns of <code>trait</code> minus the value of <code>taxon_column</code>. If present, this -together with <code>trait_score</code>- will be used to convert the trait matrix from fuzzy to crisp format.</p></dd>

  <dt id="arg-trait-score-">trait_score <a class="anchor" aria-label="anchor" href="#arg-trait-score-"></a></dt>
<dd><p>trait values or scores for each modality, a vector. Should be of the same length as <code>trait_class</code></p></dd>

  <dt id="arg-scalewithvalue-">scalewithvalue <a class="anchor" aria-label="anchor" href="#arg-scalewithvalue-"></a></dt>
<dd><p>when TRUE, will standardize with respect to total density, so that the average trait value is obtained (not the summed value).</p></dd>

  <dt id="arg-verbose-">verbose <a class="anchor" aria-label="anchor" href="#arg-verbose-"></a></dt>
<dd><p>when TRUE, will write warnings to the screen.</p></dd>

  <dt id="arg-taxonomy-">taxonomy <a class="anchor" aria-label="anchor" href="#arg-taxonomy-"></a></dt>
<dd><p>taxonomic information; first column will be matched with <code>taxon</code>, regardless of its name. When present, the unknown traits will be estimated based on taxonomic closeness of each taxon.</p></dd>

  <dt id="arg-taxon-column-">taxon_column <a class="anchor" aria-label="anchor" href="#arg-taxon-column-"></a></dt>
<dd><p>position(s) or name(s) of the column(s) that hold the taxa (of data.frame <code>trait</code>). The default is to have the first column holding the taxa. If <code>NULL</code>, or <code>0</code>, then there is no separate column with names, so the <code>row.names</code> of the dataset are used as taxon names.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p><code>get_trait_model</code> returns a time x trait density matrix of class <code>deSolve</code> (see <a href="https://rdrr.io/pkg/deSolve/man/ode.html" class="external-link">ode</a>), and contains, for each output time (rows), the traits as defined in <code>trait</code>.</p>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Karline Soetaert &lt;karline.soetaert@nioz.nl&gt;</p>
    </div>
    <div id="note">
    <h2>Note</h2>
    <p><code>get_trait_model</code> is based on the Btrait function <a href="https://EMODnet.github.io/Btrait/reference/getTraitDensity.html" class="external-link">get_trait_density</a>. It returns an object of class <code>deSolve</code> and matrix (rather than a dataframe). This is to make use of the deSolve plotting facilities.</p>
<p>The names of the columns in <code>model</code> should have the taxon names, that are also found in the trait database. This can create a problem if the model output is a <code>data.frame</code> and the taxon names contain blancs. In this case, the names will have "." rather than " ".</p>
<p>This can be solved either (1) by making the names in the trait database consistent with the model output (use R-function <code><a href="https://rdrr.io/r/base/make.names.html" class="external-link">make.names()</a></code> to convert names with spaces to good names, as used in data.frames), or
(2) by adding, to object <code>model</code> an attribute called <code>taxon.names</code> that has the actual taxon names (in the order of the columns); (<code>attributes(model)$taxon.names  &lt;- taxon.names</code>).</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><a href="trawlingfun.html">run_perturb</a> for the disturbance model.</p>
<p><a href="getDbModel.html">get_Db_model</a> for deriving bioturbation and irrigation indices from a perturbation or logistic model.</p>
<p><a href="https://EMODnet.github.io/Btrait/reference/Btraitdata.html" class="external-link">Traits_nioz</a>, for trait databases in packge Btrait..</p>
<p><a href="https://EMODnet.github.io/Btrait/reference/getTraitDensity.html" class="external-link">get_trait_density</a>, for the function on which <code>get_trait_model</code> is based.</p>
<p><a href="https://EMODnet.github.io/Btrait/reference/traitfun.html" class="external-link">get_trait</a> for functions from package Btrait to extract traits</p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ====================================================</span></span></span>
<span class="r-in"><span><span class="co">## A small model - units per day</span></span></span>
<span class="r-in"><span><span class="co">## ====================================================</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># parameters</span></span></span>
<span class="r-in"><span> <span class="va">Trawl.pars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    taxon <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sp.1"</span>,<span class="st">"sp.2"</span>,<span class="st">"sp.3"</span>,<span class="st">"sp.4"</span><span class="op">)</span>, <span class="co"># name of taxa</span></span></span>
<span class="r-in"><span>    r     <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.01</span>,  <span class="fl">0.005</span>,  <span class="fl">0.05</span>, <span class="fl">0.001</span><span class="op">)</span>,  <span class="co"># rate of increase (/day)</span></span></span>
<span class="r-in"><span>    K     <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>   <span class="fl">1</span>,     <span class="fl">10</span>,   <span class="fl">0.5</span>,    <span class="fl">10</span><span class="op">)</span>,  <span class="co"># carrying capacity (density or biomass)</span></span></span>
<span class="r-in"><span>    d     <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="fl">0.1</span>,    <span class="fl">0.1</span>,   <span class="fl">0.5</span>,   <span class="fl">0.8</span><span class="op">)</span><span class="op">)</span>  <span class="co"># instantaneous depletion</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># run the model for 5 years, output every day </span></span></span>
<span class="r-in"><span> <span class="va">times</span>   <span class="op">&lt;-</span> <span class="fl">0</span><span class="op">:</span><span class="fl">1825</span>                          <span class="co"># time in days (consistent with pars)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># trawling frequency once / twice per year</span></span></span>
<span class="r-in"><span> <span class="va">trawl1</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from<span class="op">=</span><span class="fl">92</span>, by<span class="op">=</span>  <span class="fl">365</span>, to<span class="op">=</span><span class="fl">365</span><span class="op">*</span><span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="va">trawl2</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from<span class="op">=</span><span class="fl">92</span>, by<span class="op">=</span><span class="fl">182.5</span>, to<span class="op">=</span><span class="fl">365</span><span class="op">*</span><span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># run both models</span></span></span>
<span class="r-in"><span> <span class="va">trawl1run</span> <span class="op">&lt;-</span> <span class="fu"><a href="trawlingfun.html">run_perturb</a></span> <span class="op">(</span>parms  <span class="op">=</span> <span class="va">Trawl.pars</span>, </span></span>
<span class="r-in"><span>                           times  <span class="op">=</span> <span class="va">times</span>, </span></span>
<span class="r-in"><span>                           events <span class="op">=</span> <span class="va">trawl1</span><span class="op">)</span>     </span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span> <span class="va">trawl2run</span> <span class="op">&lt;-</span> <span class="fu"><a href="trawlingfun.html">run_perturb</a></span> <span class="op">(</span>parms  <span class="op">=</span> <span class="va">Trawl.pars</span>, </span></span>
<span class="r-in"><span>                           times  <span class="op">=</span> <span class="va">times</span>, </span></span>
<span class="r-in"><span>                           events <span class="op">=</span> <span class="va">trawl2</span><span class="op">)</span>     </span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span> <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">trawl1run</span>, <span class="va">trawl2run</span>, lty<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="getTraitModel-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">##-----------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Fuzzy-coded traits</span></span></span>
<span class="r-in"><span><span class="co">##-----------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Note: no data for "sp.4"</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">Btraits</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  taxon   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sp.1"</span>,<span class="st">"sp.2"</span>,<span class="st">"sp.3"</span>,<span class="st">"sp.5"</span>, <span class="st">"sp.6"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  T1_M1   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>     , <span class="fl">0</span>    ,   <span class="fl">0</span>  , <span class="fl">0.2</span>  ,     <span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  T1_M2   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>     , <span class="fl">0</span>    , <span class="fl">0.5</span>  , <span class="fl">0.3</span>  ,     <span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  T1_M3   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>     , <span class="fl">1</span>    , <span class="fl">0.5</span>  , <span class="fl">0.5</span>  ,     <span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  T2_M1   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>     , <span class="fl">0</span>    ,   <span class="fl">1</span>  , <span class="fl">0.5</span>  ,     <span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  T2_M2   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>     , <span class="fl">1</span>    ,   <span class="fl">0</span>  , <span class="fl">0.5</span>  ,     <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># The metadata for these traits (meaining of Btraits columns)</span></span></span>
<span class="r-in"><span><span class="va">Btraits.lab</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  colname  <span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"T1_M1"</span>,<span class="st">"T1_M2"</span>,<span class="st">"T1_M3"</span>,<span class="st">"T2_M1"</span>,<span class="st">"T2_M2"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  trait    <span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"T1"</span>   ,<span class="st">"T1"</span>   ,<span class="st">"T1"</span>   ,<span class="st">"T2"</span>   ,<span class="st">"T2"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  modality <span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"M1"</span>   ,<span class="st">"M2"</span>   ,<span class="st">"M3"</span>   ,<span class="st">"M1"</span>   ,<span class="st">"M2"</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>  score    <span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>      , <span class="fl">0.5</span>   , <span class="fl">1</span>     , <span class="fl">0.2</span>   , <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">##-----------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Small dataset: taxonomy</span></span></span>
<span class="r-in"><span><span class="co">##-----------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">Btaxonomy</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  species <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sp.1"</span>,<span class="st">"sp.2"</span>,<span class="st">"sp.3"</span>,<span class="st">"sp.4"</span>,<span class="st">"sp.5"</span>,<span class="st">"sp.6"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  genus   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="st">"g.1"</span>, <span class="st">"g.2"</span>, <span class="st">"g.2"</span>, <span class="st">"g.2"</span>, <span class="st">"g.3"</span>, <span class="st">"g.4"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  family  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="st">"f.1"</span>, <span class="st">"f.1"</span>, <span class="st">"f.1"</span>, <span class="st">"f.1"</span>, <span class="st">"f.2"</span>, <span class="st">"f.3"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  order   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="st">"o.1"</span>, <span class="st">"o.1"</span>, <span class="st">"o.1"</span>, <span class="st">"o.1"</span>, <span class="st">"o.2"</span>, <span class="st">"o.2"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  class   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="st">"c.1"</span>, <span class="st">"c.1"</span>, <span class="st">"c.1"</span>, <span class="st">"c.1"</span>, <span class="st">"c.1"</span>, <span class="st">"c.1"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">##-----------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Trait changes for runs -  average for each trait (crisp format)</span></span></span>
<span class="r-in"><span><span class="co">##-----------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># if verbose=TRUE, a warning will be given, as there is no trait information</span></span></span>
<span class="r-in"><span><span class="co"># for sp4 - this affects the trait density for station "b"</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">TraitRun1</span> <span class="op">&lt;-</span> <span class="fu">get_trait_model</span> <span class="op">(</span></span></span>
<span class="r-in"><span>                        model       <span class="op">=</span> <span class="va">trawl1run</span>,  </span></span>
<span class="r-in"><span>                        trait       <span class="op">=</span> <span class="va">Btraits</span>, </span></span>
<span class="r-in"><span>                        trait_class <span class="op">=</span> <span class="va">Btraits.lab</span><span class="op">$</span><span class="va">trait</span>, </span></span>
<span class="r-in"><span>                        trait_score <span class="op">=</span> <span class="va">Btraits.lab</span><span class="op">$</span><span class="va">score</span>, </span></span>
<span class="r-in"><span>                        verbose     <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span>                        </span></span>
<span class="r-in"><span><span class="va">TraitRun2</span> <span class="op">&lt;-</span> <span class="fu">get_trait_model</span> <span class="op">(</span></span></span>
<span class="r-in"><span>                        model       <span class="op">=</span> <span class="va">trawl2run</span>,  </span></span>
<span class="r-in"><span>                        trait       <span class="op">=</span> <span class="va">Btraits</span>, </span></span>
<span class="r-in"><span>                        trait_class <span class="op">=</span> <span class="va">Btraits.lab</span><span class="op">$</span><span class="va">trait</span>, </span></span>
<span class="r-in"><span>                        trait_score <span class="op">=</span> <span class="va">Btraits.lab</span><span class="op">$</span><span class="va">score</span>, </span></span>
<span class="r-in"><span>                        verbose     <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span>                        </span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">TraitRun1</span><span class="op">)</span><span class="op">$</span><span class="va">notrait</span>   <span class="co"># species that was ignored</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "sp.4"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">TraitRun1</span>, <span class="va">TraitRun2</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="getTraitModel-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">##-----------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Trait changes - keeping fuzzy scores</span></span></span>
<span class="r-in"><span><span class="co">##-----------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">TraitRun1b</span> <span class="op">&lt;-</span> <span class="fu">get_trait_model</span> <span class="op">(</span></span></span>
<span class="r-in"><span>                        model       <span class="op">=</span> <span class="va">trawl1run</span>,  </span></span>
<span class="r-in"><span>                        trait       <span class="op">=</span> <span class="va">Btraits</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">TraitRun1b</span><span class="op">)</span><span class="op">$</span><span class="va">notrait</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "sp.4"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">##-----------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Trait changes - keeping fuzzy scores - </span></span></span>
<span class="r-in"><span><span class="co">## use taxonomic info to create unknown traits</span></span></span>
<span class="r-in"><span><span class="co">##-----------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">TraitRun1c</span> <span class="op">&lt;-</span> <span class="fu">get_trait_model</span> <span class="op">(</span></span></span>
<span class="r-in"><span>                        model       <span class="op">=</span> <span class="va">trawl1run</span>,  </span></span>
<span class="r-in"><span>                        trait       <span class="op">=</span> <span class="va">Btraits</span>, </span></span>
<span class="r-in"><span>                        taxonomy    <span class="op">=</span> <span class="va">Btaxonomy</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">TraitRun1c</span><span class="op">)</span><span class="op">$</span><span class="va">notrait</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] NA</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">TraitRun1b</span>, <span class="va">TraitRun1c</span><span class="op">)</span></span></span>
<span class="r-in"><span> </span></span>
<span class="r-plt img"><img src="getTraitModel-3.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Karline Soetaert, Olivier Beauchard.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer></div>






  </body></html>

