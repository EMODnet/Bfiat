<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Function to obtain (time x trait) data by combining model output (time x taxon) with trait (taxon x trait) data. — Combining Model output and Trait data • Bfiat</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Function to obtain (time x trait) data by combining model output (time x taxon) with trait (taxon x trait) data. — Combining Model output and Trait data"><meta name="description" content="get_trait_model combines (1) output of a fisheries model that describes how taxa densities evolve with time, with (2) a trait database for these taxa, to obtain how the traits evolve over time."><meta property="og:description" content="get_trait_model combines (1) output of a fisheries model that describes how taxa densities evolve with time, with (2) a trait database for these taxa, to obtain how the traits evolve over time."><meta property="og:image" content="https://EMODnet.github.io/Bfiat/reference/figures/Logo_hex.png"><meta property="og:image:alt" content="Bfiat logo"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="inverse" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">Bfiat</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-how-to" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">How To</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-how-to"><li><a class="dropdown-item" href="../articles/installation.html">Installation</a></li>
    <li><a class="dropdown-item" href="../articles/Bfiat.html">Description</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-examples-of-use" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Examples of use</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-examples-of-use"><li><a class="dropdown-item" href="../articles/MWTL.html">The dutch monitoring data - fishing impact on density</a></li>
    <li><a class="dropdown-item" href="../articles/MWTL_EF.html">The dutch monitoring - fishing impact on ecosystem functioning</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="active nav-item"><a class="nav-link" href="../reference/index.html"><span class="fa fa-file-code-o"></span> functions</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://emodnet.github.io/Bfiat/"><span class="fa fa-github fa-lg"></span> github</a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Function to obtain (time x trait) data by combining model output (time x taxon) with trait (taxon x trait) data.</h1>

      <div class="d-none name"><code>getTraitModel.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>get_trait_model</code> combines (1) output of a fisheries model that describes how taxa densities evolve with time, with (2) a trait database for these taxa, to obtain how the traits evolve over time.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_trait_model</span><span class="op">(</span><span class="va">model</span>, <span class="va">trait</span>, trait_class <span class="op">=</span> <span class="cn">NULL</span>, trait_score <span class="op">=</span> <span class="cn">NULL</span>, </span>
<span>                taxon_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span><span class="op">[</span><span class="op">-</span><span class="fl">1</span><span class="op">]</span>, </span>
<span>                taxonomy <span class="op">=</span> <span class="cn">NULL</span>, taxon_column <span class="op">=</span> <span class="fl">1</span>, </span>
<span>                scalewithvalue <span class="op">=</span> <span class="cn">TRUE</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <p></p>
<dl><dt id="arg-model">model<a class="anchor" aria-label="anchor" href="#arg-model"></a></dt>
<dd><p>dynamic model output that describes how taxa change over time. This is a matrix with (time x taxon) information, such as generated from the function <a href="trawlingfun.html">run_perturb</a>. The first column should contain the time, and the other columns the taxon density over time, with the column names the actual taxon names. (see note for the consequences of this.)</p></dd>

  <dt id="arg-taxon-names">taxon_names<a class="anchor" aria-label="anchor" href="#arg-taxon-names"></a></dt>
<dd><p>names of the taxa, one for each column in <code>model</code>, except the first column. A vector of length = ncol(model) - 1. These names will be matched with the trait database, and optionally with <code>weight</code> if this is a two-columned matrix/data.frame.</p></dd>

  <dt id="arg-trait">trait<a class="anchor" aria-label="anchor" href="#arg-trait"></a></dt>
<dd><p>(taxon x trait) data or (descriptor x trait) data, in *WIDE* format, and containing numerical values only. Traits can be fuzzy coded. The trait matrix should have the name of the taxon in its first column (if <code>taxon_column=1</code>); it is also allowed to have the taxon names as row.names (if <code>taxon_column=0</code>).</p></dd>

  <dt id="arg-trait-class-">trait_class <a class="anchor" aria-label="anchor" href="#arg-trait-class-"></a></dt>
<dd><p>a vector with indices to trait levels for each modality in matrix <code>trait</code>. The length of this vector should equal the number of columns of <code>trait</code> minus the value of <code>taxon_column</code>. If present, this -together with <code>trait_score</code>- will be used to convert the trait matrix from fuzzy to crisp format.</p></dd>

  <dt id="arg-trait-score-">trait_score <a class="anchor" aria-label="anchor" href="#arg-trait-score-"></a></dt>
<dd><p>trait values or scores for each modality, a vector. Should be of the same length as <code>trait_class</code></p></dd>

  <dt id="arg-scalewithvalue-">scalewithvalue <a class="anchor" aria-label="anchor" href="#arg-scalewithvalue-"></a></dt>
<dd><p>when TRUE, will standardize with respect to total density, so that the average trait value is obtained (not the summed value).</p></dd>

  <dt id="arg-verbose-">verbose <a class="anchor" aria-label="anchor" href="#arg-verbose-"></a></dt>
<dd><p>when TRUE, will write warnings to the screen.</p></dd>

  <dt id="arg-taxonomy-">taxonomy <a class="anchor" aria-label="anchor" href="#arg-taxonomy-"></a></dt>
<dd><p>taxonomic information; first column will be matched with <code>taxon</code>, regardless of its name. When present, the unknown traits will be estimated based on taxonomic closeness of each taxon.</p></dd>

  <dt id="arg-taxon-column-">taxon_column <a class="anchor" aria-label="anchor" href="#arg-taxon-column-"></a></dt>
<dd><p>position(s) or name(s) of the column(s) that hold the taxa (of data.frame <code>trait</code>). The default is to have the first column holding the taxa. If <code>NULL</code>, or <code>0</code>, then there is no separate column with names, so the <code>row.names</code> of the dataset are used as taxon names.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>get_trait_model</code> returns a time x trait density matrix of class <code>deSolve</code> (see <a href="https://rdrr.io/pkg/deSolve/man/ode.html" class="external-link">ode</a>), and contains, for each output time (rows), the traits as defined in <code>trait</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Karline Soetaert &lt;karline.soetaert@nioz.nl&gt;</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p><code>get_trait_model</code> is based on the Btrait function <a href="https://EMODnet.github.io/Btrait/reference/getTraitDensity.html" class="external-link">get_trait_density</a>. It returns an object of class <code>deSolve</code> and matrix (rather than a dataframe). This is to make use of the deSolve plotting facilities.</p>
<p>The names of the columns in <code>model</code> should have the taxon names, that are also found in the trait database. This can create a problem if the model output is a <code>data.frame</code> and the taxon names contain blancs. In this case, the names will have "." rather than " ".</p>
<p>This can be solved either (1) by making the names in the trait database consistent with the model output (use R-function <code><a href="https://rdrr.io/r/base/make.names.html" class="external-link">make.names()</a></code> to convert names with spaces to good names, as used in data.frames), or
(2) by adding, to object <code>model</code> an attribute called <code>taxon.names</code> that has the actual taxon names (in the order of the columns); (<code>attributes(model)$taxon.names  &lt;- taxon.names</code>).</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><a href="trawlingfun.html">run_perturb</a> for the disturbance model.</p>
<p><a href="getDbModel.html">get_Db_model</a> for deriving bioturbation and irrigation indices from a perturbation or logistic model.</p>
<p><a href="https://EMODnet.github.io/Btrait/reference/Btraitdata.html" class="external-link">Traits_nioz</a>, for trait databases in packge Btrait..</p>
<p><a href="https://EMODnet.github.io/Btrait/reference/getTraitDensity.html" class="external-link">get_trait_density</a>, for the function on which <code>get_trait_model</code> is based.</p>
<p><a href="https://EMODnet.github.io/Btrait/reference/traitfun.html" class="external-link">get_trait</a> for functions from package Btrait to extract traits</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ====================================================</span></span></span>
<span class="r-in"><span><span class="co">## A small model - units per day</span></span></span>
<span class="r-in"><span><span class="co">## ====================================================</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># parameters</span></span></span>
<span class="r-in"><span> <span class="va">Trawl.pars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    taxon <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sp.1"</span>,<span class="st">"sp.2"</span>,<span class="st">"sp.3"</span>,<span class="st">"sp.4"</span><span class="op">)</span>, <span class="co"># name of taxa</span></span></span>
<span class="r-in"><span>    r     <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.01</span>,  <span class="fl">0.005</span>,  <span class="fl">0.05</span>, <span class="fl">0.001</span><span class="op">)</span>,  <span class="co"># rate of increase (/day)</span></span></span>
<span class="r-in"><span>    K     <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>   <span class="fl">1</span>,     <span class="fl">10</span>,   <span class="fl">0.5</span>,    <span class="fl">10</span><span class="op">)</span>,  <span class="co"># carrying capacity (density or biomass)</span></span></span>
<span class="r-in"><span>    d     <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="fl">0.1</span>,    <span class="fl">0.1</span>,   <span class="fl">0.5</span>,   <span class="fl">0.8</span><span class="op">)</span><span class="op">)</span>  <span class="co"># instantaneous depletion</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># run the model for 5 years, output every day </span></span></span>
<span class="r-in"><span> <span class="va">times</span>   <span class="op">&lt;-</span> <span class="fl">0</span><span class="op">:</span><span class="fl">1825</span>                          <span class="co"># time in days (consistent with pars)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># trawling frequency once / twice per year</span></span></span>
<span class="r-in"><span> <span class="va">trawl1</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from<span class="op">=</span><span class="fl">92</span>, by<span class="op">=</span>  <span class="fl">365</span>, to<span class="op">=</span><span class="fl">365</span><span class="op">*</span><span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-in"><span> <span class="va">trawl2</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from<span class="op">=</span><span class="fl">92</span>, by<span class="op">=</span><span class="fl">182.5</span>, to<span class="op">=</span><span class="fl">365</span><span class="op">*</span><span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># run both models</span></span></span>
<span class="r-in"><span> <span class="va">trawl1run</span> <span class="op">&lt;-</span> <span class="fu"><a href="trawlingfun.html">run_perturb</a></span> <span class="op">(</span>parms  <span class="op">=</span> <span class="va">Trawl.pars</span>, </span></span>
<span class="r-in"><span>                           times  <span class="op">=</span> <span class="va">times</span>, </span></span>
<span class="r-in"><span>                           events <span class="op">=</span> <span class="va">trawl1</span><span class="op">)</span>     </span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span> <span class="va">trawl2run</span> <span class="op">&lt;-</span> <span class="fu"><a href="trawlingfun.html">run_perturb</a></span> <span class="op">(</span>parms  <span class="op">=</span> <span class="va">Trawl.pars</span>, </span></span>
<span class="r-in"><span>                           times  <span class="op">=</span> <span class="va">times</span>, </span></span>
<span class="r-in"><span>                           events <span class="op">=</span> <span class="va">trawl2</span><span class="op">)</span>     </span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span> <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">trawl1run</span>, <span class="va">trawl2run</span>, lty<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="getTraitModel-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">##-----------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Fuzzy-coded traits</span></span></span>
<span class="r-in"><span><span class="co">##-----------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Note: no data for "sp.4"</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">Btraits</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  taxon   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sp.1"</span>,<span class="st">"sp.2"</span>,<span class="st">"sp.3"</span>,<span class="st">"sp.5"</span>, <span class="st">"sp.6"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  T1_M1   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>     , <span class="fl">0</span>    ,   <span class="fl">0</span>  , <span class="fl">0.2</span>  ,     <span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  T1_M2   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>     , <span class="fl">0</span>    , <span class="fl">0.5</span>  , <span class="fl">0.3</span>  ,     <span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  T1_M3   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>     , <span class="fl">1</span>    , <span class="fl">0.5</span>  , <span class="fl">0.5</span>  ,     <span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  T2_M1   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>     , <span class="fl">0</span>    ,   <span class="fl">1</span>  , <span class="fl">0.5</span>  ,     <span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  T2_M2   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>     , <span class="fl">1</span>    ,   <span class="fl">0</span>  , <span class="fl">0.5</span>  ,     <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># The metadata for these traits (meaining of Btraits columns)</span></span></span>
<span class="r-in"><span><span class="va">Btraits.lab</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  colname  <span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"T1_M1"</span>,<span class="st">"T1_M2"</span>,<span class="st">"T1_M3"</span>,<span class="st">"T2_M1"</span>,<span class="st">"T2_M2"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  trait    <span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"T1"</span>   ,<span class="st">"T1"</span>   ,<span class="st">"T1"</span>   ,<span class="st">"T2"</span>   ,<span class="st">"T2"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  modality <span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"M1"</span>   ,<span class="st">"M2"</span>   ,<span class="st">"M3"</span>   ,<span class="st">"M1"</span>   ,<span class="st">"M2"</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>  score    <span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>      , <span class="fl">0.5</span>   , <span class="fl">1</span>     , <span class="fl">0.2</span>   , <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">##-----------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Small dataset: taxonomy</span></span></span>
<span class="r-in"><span><span class="co">##-----------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">Btaxonomy</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  species <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sp.1"</span>,<span class="st">"sp.2"</span>,<span class="st">"sp.3"</span>,<span class="st">"sp.4"</span>,<span class="st">"sp.5"</span>,<span class="st">"sp.6"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  genus   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="st">"g.1"</span>, <span class="st">"g.2"</span>, <span class="st">"g.2"</span>, <span class="st">"g.2"</span>, <span class="st">"g.3"</span>, <span class="st">"g.4"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  family  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="st">"f.1"</span>, <span class="st">"f.1"</span>, <span class="st">"f.1"</span>, <span class="st">"f.1"</span>, <span class="st">"f.2"</span>, <span class="st">"f.3"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  order   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="st">"o.1"</span>, <span class="st">"o.1"</span>, <span class="st">"o.1"</span>, <span class="st">"o.1"</span>, <span class="st">"o.2"</span>, <span class="st">"o.2"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  class   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="st">"c.1"</span>, <span class="st">"c.1"</span>, <span class="st">"c.1"</span>, <span class="st">"c.1"</span>, <span class="st">"c.1"</span>, <span class="st">"c.1"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">##-----------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Trait changes for runs -  average for each trait (crisp format)</span></span></span>
<span class="r-in"><span><span class="co">##-----------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># if verbose=TRUE, a warning will be given, as there is no trait information</span></span></span>
<span class="r-in"><span><span class="co"># for sp4 - this affects the trait density for station "b"</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">TraitRun1</span> <span class="op">&lt;-</span> <span class="fu">get_trait_model</span> <span class="op">(</span></span></span>
<span class="r-in"><span>                        model       <span class="op">=</span> <span class="va">trawl1run</span>,  </span></span>
<span class="r-in"><span>                        trait       <span class="op">=</span> <span class="va">Btraits</span>, </span></span>
<span class="r-in"><span>                        trait_class <span class="op">=</span> <span class="va">Btraits.lab</span><span class="op">$</span><span class="va">trait</span>, </span></span>
<span class="r-in"><span>                        trait_score <span class="op">=</span> <span class="va">Btraits.lab</span><span class="op">$</span><span class="va">score</span>, </span></span>
<span class="r-in"><span>                        verbose     <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span>                        </span></span>
<span class="r-in"><span><span class="va">TraitRun2</span> <span class="op">&lt;-</span> <span class="fu">get_trait_model</span> <span class="op">(</span></span></span>
<span class="r-in"><span>                        model       <span class="op">=</span> <span class="va">trawl2run</span>,  </span></span>
<span class="r-in"><span>                        trait       <span class="op">=</span> <span class="va">Btraits</span>, </span></span>
<span class="r-in"><span>                        trait_class <span class="op">=</span> <span class="va">Btraits.lab</span><span class="op">$</span><span class="va">trait</span>, </span></span>
<span class="r-in"><span>                        trait_score <span class="op">=</span> <span class="va">Btraits.lab</span><span class="op">$</span><span class="va">score</span>, </span></span>
<span class="r-in"><span>                        verbose     <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span>                        </span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">TraitRun1</span><span class="op">)</span><span class="op">$</span><span class="va">notrait</span>   <span class="co"># species that was ignored</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "sp.4"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">TraitRun1</span>, <span class="va">TraitRun2</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="getTraitModel-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">##-----------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Trait changes - keeping fuzzy scores</span></span></span>
<span class="r-in"><span><span class="co">##-----------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">TraitRun1b</span> <span class="op">&lt;-</span> <span class="fu">get_trait_model</span> <span class="op">(</span></span></span>
<span class="r-in"><span>                        model       <span class="op">=</span> <span class="va">trawl1run</span>,  </span></span>
<span class="r-in"><span>                        trait       <span class="op">=</span> <span class="va">Btraits</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">TraitRun1b</span><span class="op">)</span><span class="op">$</span><span class="va">notrait</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "sp.4"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">##-----------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Trait changes - keeping fuzzy scores - </span></span></span>
<span class="r-in"><span><span class="co">## use taxonomic info to create unknown traits</span></span></span>
<span class="r-in"><span><span class="co">##-----------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">TraitRun1c</span> <span class="op">&lt;-</span> <span class="fu">get_trait_model</span> <span class="op">(</span></span></span>
<span class="r-in"><span>                        model       <span class="op">=</span> <span class="va">trawl1run</span>,  </span></span>
<span class="r-in"><span>                        trait       <span class="op">=</span> <span class="va">Btraits</span>, </span></span>
<span class="r-in"><span>                        taxonomy    <span class="op">=</span> <span class="va">Btaxonomy</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">TraitRun1c</span><span class="op">)</span><span class="op">$</span><span class="va">notrait</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] NA</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">TraitRun1b</span>, <span class="va">TraitRun1c</span><span class="op">)</span></span></span>
<span class="r-in"><span> </span></span>
<span class="r-plt img"><img src="getTraitModel-3.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Karline Soetaert, Olivier Beauchard.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

